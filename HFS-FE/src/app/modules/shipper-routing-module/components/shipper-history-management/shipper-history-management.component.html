<div class="grid table-demo">
    <div class="col-12">
        <div class="card">
            <h5>All Order History</h5>
            <p-table styleClass="p-datatable-orders" [value]="lstOrderHistory" 
                dataKey="name" [tableStyle]="{ 'min-width': '60rem' }" [rows]="10"
                [paginator]="true" [filterDelay]="0" [rowsPerPageOptions]="[5,10,25,50]"
                responsiveLayout="scroll"
                [loading]="loading"
                currentPageReportTemplate="Total {totalRecords} order on this status"
                [showCurrentPageReport]="showCurrentPageReport"
                >
                    <ng-template pTemplate="header">
                        <tr>
                            
                            <th  pSortableColumn="orderId">ID <p-sortIcon field="orderId"></p-sortIcon></th>
                            <th  pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon></th>
                            <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th> 
                            <th pSortableColumn="address">Address <p-sortIcon field="shipAddress"></p-sortIcon></th> 
                            <th pSortableColumn="phone">PhoneNumber <p-sortIcon field="phoneNumber"></p-sortIcon></th> 
                            <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>                            
                            <th style="text-align: center" >Action</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-order let-expanded="expanded">
                        <tr>
                            
                            <td>{{order.orderId}}</td>
                            <td>{{order.orderDate}}</td>
                            <td>{{order.total}} VND</td>
                            <td>{{order.shipAddress}}</td>
                            <td>{{order.customerPhone}}</td>
                            <td>{{order.status}}</td>
                            <ng-container >
                                <td style="text-align: center">
                                    <div class="flex justify-content-center flex-wrap" style="gap: 0.5rem">
                                        <div class="flex align-items-center justify-content-center">
                                            <button pButton pRipple
                                            (click)="Detail(order.orderId)"
                                                    class="p-button-rounded p-mr-2 p-button-outlined">Detail
                                                </button>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                           
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="8">There are no order on this status yet.</td>
                        </tr>
                    </ng-template>
            </p-table>
        </div>
    </div>
</div>
<p-dialog [header]="headerDialog" [(visible)]="displayDialogConfirm"
          [breakpoints]="{'960px': '75vw'}"
          [style]="{width: '50vw'}"
          [draggable]="false" [resizable]="false" [maximizable]="true" >
    <div class="grid p-fluid">
        <div class="col-12 md:col-12">
            <div class="card">
                <p-divider align="left">
                    <div class="p-d-inline-flex p-ai-center">
                        <b>Detail</b>
                    </div>
                </p-divider>
                <p-table [tableStyle]="{ 'min-width': '50rem' }"
                    [value]="orderDetails"
                >
                    <ng-template  pTemplate="header" >
                        <tr>
                            <th>Food ID</th>
                            <th>Image</th>
                            <th>FoodName</th>
                            <th>Price</th>
                            <th>Quantity</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-orderDetail>
                        <tr>
                            <td>{{orderDetail.foodId}}</td>
                            <td><p-image src="data:image/gif;base64,{{orderDetail.imageBase64.imageBase64}}" [preview]="true"
                                [alt]="orderDetail.imageBase64.name" class="dialogimages_image w-10rem shadow-2"
                                ></p-image></td>                           
                            <td>{{orderDetail.foodName}}</td>
                            <td>{{orderDetail.unitPrice}}</td>
                            <td>{{orderDetail.quantity}}</td>
                        </tr>
                    </ng-template>
                </p-table>
                <p style="text-align: right;">Total: </p>
                <div class="flex">
                    <div class="w-full md:w-1/4">
                        <p-image src="https://primefaces.org/cdn/primeng/images/galleria/galleria1.jpg" [preview]="true" alt="Image" width="250">
                            <ng-template pTemplate="indicator">
                                <i class="pi pi-check"></i>
                            </ng-template>
                        </p-image> 
                    </div>
                    <div class="w-full md:w-3/4">
                        
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</p-dialog>
