<div class="page-content">
    <div class="card sidebar" *ngIf="this.authService.getRole() == 'CU'">
        <!-- <a id="profile-option" class="report-sidebar-option" href="#" (click)="this.router.navigateByUrl('/profile');"
            onclick="event.preventDefault();">Profile</a>
        <div class="dash-line"></div>
        <a id="myorder-option" class="report-sidebar-option" href="#" onclick="event.preventDefault();">Order</a>
        <div class="dash-line"></div>
        <a id="shipaddress-option" class="report-sidebar-option" (click)="this.router.navigateByUrl('/shipaddress')"
            href="#" onclick="event.preventDefault();">Ship address</a>
        <div class="dash-line"></div>
        <a id="postreport-option" class="report-sidebar-option" href="#"
            (click)="this.router.navigateByUrl('/postreport');" onclick="event.preventDefault();">Post
            report
        </a>
        <div class="dash-line"></div>
        <a id="menureport-option" class="report-sidebar-option-selected" href="#" onclick="event.preventDefault();">Menu
            report
        </a> -->
        <!-- <button pButton pRipple class="p-button-info p-mr-2 p-button-outlined" style="width: 100%;">Profile</button><hr>
        <button pButton pRipple class="p-button-info p-mr-2 p-button-outlined" style="width: 100%;">MyOrder</button> -->
        <app-menu-myaccount></app-menu-myaccount>

    </div>

    <div class="card main-body">
        <h2>My food report</h2>
        <p-table #dt [value]="lstFoodReport" dataKey="id" styleClass="p-datatable-customers" [rowHover]="true"
            [rows]="10" [showCurrentPageReport]="true" [paginator]="lstFoodReport.length > 5" [filterDelay]="0"
            [rowsPerPageOptions]="[5,10,25,50]" currentPageReportTemplate="Total: {totalRecords} food reports"
            [globalFilterFields]="['reportContent']" responsiveLayout="scroll" [loading]="loading">
            <ng-template pTemplate="caption">
                <div class="flex flex-row align-items-center flex-wrap justify-content-between ">
                    <div class="flex-1">
                        <span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" #textInput
                                (input)="dt.filterGlobal(textInput.value, 'contains')"
                                placeholder="Search by report content" />
                        </span>
                    </div>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="reportContent">
                        <div class="flex justify-content-between align-items-center">
                            Report Content
                            <p-sortIcon field="reportContent"></p-sortIcon>
                            <p-columnFilter type="text" field="reportContent" display="menu"
                                class="ml-auto"></p-columnFilter>
                        </div>
                    </th>
                    <!-- <th style="min-width: 8rem">
                        <div class="flex justify-content-between align-items-center">
                            Action
                        </div>
                    </th> -->
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-foodrp>
                <tr class="p-selectable-row">
                    <td (click)="viewContentDetail(foodrp)">
                        <div id="reportcontent-data">
                            {{foodrp.reportContent}}
                        </div>
                        <!-- <span class="p-column-title">Report Content</span>
                        <p class="report-content" (click)="viewContentDetail(foodrp)">{{foodrp.reportContent}}</p> -->
                    </td>
                    <!-- <td style="text-align: center">
                        <div class="flex justify-content-center flex-wrap" style="gap: 0.5rem">

                            <div class="flex align-items-center justify-content-center">
                                <button pButton pRipple icon="pi pi-times" (click)="openCancelModal(foodrp)"
                                    class="p-button-rounded p-mr-2"></button>
                            </div>
                        </div>
                    </td> -->
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="8">No food report yet.</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<p-dialog header="Report detail" [(visible)]="visibleContentDialog" [style]="{width: '50vw'}" [maximizable]="true"
    [modal]="true">
    <!-- <p class="dialog-content-detail">
        {{contentDialog.reportContent}}
    </p> -->
    <table class="table-report-detail">
        <tbody>
            <tr>
                <th>You created this report on: </th>
                <td>
                    {{contentDialog.createDate}}
                </td>
            </tr>
            <tr>
                <th>Your report content: </th>
                <td>
                    {{contentDialog.reportContent}}
                </td>
            </tr>
            <tr>
                <th>Name of the shop: </th>
                <td>
                    {{contentDialog.shopName}}
                </td>
            </tr>
            <tr>
                <th>Name of the reported food: </th>
                <td>
                    {{contentDialog.foodName}}
                </td>
            </tr>
            <tr>
                <th>Current report status: </th>
                <td>
                    <p-tag [value]="contentDialog.status" [severity]="getSeverity(contentDialog.status)"></p-tag>
                </td>
            </tr>
            <tr>
                <th>Moderator's note: </th>
                <td>
                    {{contentDialog.note}}
                </td>
            </tr>
        </tbody>
    </table>
</p-dialog>
<p-toast [baseZIndex]="99999" key="notify"></p-toast>